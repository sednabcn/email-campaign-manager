name: Quick Email Test

on:
  workflow_dispatch:

jobs:
  test-email:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create test files
        run: |
          echo "Test log entry" > campaign_execution.log
          mkdir -p tracking
          echo '{"test": "data"}' > tracking/test.json
          echo '{"quick": "test"}' > test.json

      - name: Send test email
        uses: dawidd6/action-send-mail@v4
        with:
          server_address: smtp.gmail.com
          server_port: 587
          secure: true
          username: ${{ secrets.SMTP_USER }}
          password: ${{ secrets.SMTP_PASS }}
          subject: "ðŸš€ Quick Test Email"
          to: ${{ secrets.SMTP_USER }}
          from: ${{ secrets.SMTP_USER }}
          body: file://email_body.txt
          attachments: |
            campaign_execution.log
            tracking/**/*
            *.json
